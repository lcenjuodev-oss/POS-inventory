(()=>{var e={};e.id=420,e.ids=[420],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},99430:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(27336),s(68218),s(35866);var l=s(23191),a=s(88716),n=s(37922),r=s.n(n),i=s(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["seller",{children:["bon-de-commande",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,27336)),"/Users/idjuo/Desktop/POS-inventory/app/seller/bon-de-commande/new/page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,68218)),"/Users/idjuo/Desktop/POS-inventory/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/idjuo/Desktop/POS-inventory/app/seller/bon-de-commande/new/page.tsx"],x="/seller/bon-de-commande/new/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new l.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/seller/bon-de-commande/new/page",pathname:"/seller/bon-de-commande/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},14994:(e,t,s)=>{Promise.resolve().then(s.bind(s,75e3))},75e3:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var l=s(10326),a=s(17577),n=s(35047),r=s(21021),i=s(3274),o=s(30360);let c=[{id:"C1",name:"John Doe",phone:"+212 600-000000"},{id:"C2",name:"Jane Smith",phone:"+212 611-123456"},{id:"C3",name:"Acme Corp.",phone:"+212 622-987654"}],d=[{id:"P1",name:"Sanitaire Set Deluxe",reference:"SAN-001",price:120,category:"Sanitaire",imageUrl:"https://images.pexels.com/photos/37347/thermometer-temperature-fever-flu.jpg?auto=compress&cs=tinysrgb&w=400"},{id:"P2",name:"Premium Pipe 2m",reference:"TUY-200",price:45,category:"Tuyaux",imageUrl:"https://images.pexels.com/photos/3738125/pexels-photo-3738125.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"P3",name:"Chrome Accessory Kit",reference:"ACC-101",price:80,category:"Accessoires",imageUrl:"https://images.pexels.com/photos/3738086/pexels-photo-3738086.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"P4",name:"Maintenance Service",reference:"OTH-050",price:60,category:"Others",imageUrl:"https://images.pexels.com/photos/8472661/pexels-photo-8472661.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"P5",name:"Wall Mounted Basin Mixer",reference:"SAN-002",price:95,category:"Sanitaire",imageUrl:"https://images.pexels.com/photos/1454806/pexels-photo-1454806.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"P6",name:"Flexible Shower Hose 1.5m",reference:"SAN-010",price:25,category:"Sanitaire",imageUrl:"https://images.pexels.com/photos/534151/pexels-photo-534151.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"P7",name:"PVC Pipe 32mm - 4m",reference:"TUY-032",price:30,category:"Tuyaux",imageUrl:"https://images.pexels.com/photos/3738115/pexels-photo-3738115.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"P8",name:'Compression Fitting Elbow 1/2"',reference:"TUY-210",price:8,category:"Tuyaux",imageUrl:"https://images.pexels.com/photos/3738106/pexels-photo-3738106.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"P9",name:"Bathroom Accessory Set Matte Black",reference:"ACC-050",price:150,category:"Accessoires",imageUrl:"https://images.pexels.com/photos/1457842/pexels-photo-1457842.jpeg?auto=compress&cs=tinysrgb&w=400"},{id:"P10",name:"PTFE Thread Seal Tape 12-pack",reference:"ACC-200",price:40,category:"Accessoires",imageUrl:"https://images.pexels.com/photos/3738116/pexels-photo-3738116.jpeg?auto=compress&cs=tinysrgb&w=400"}];function x(){let e=(0,n.useSearchParams)(),t=(0,n.useRouter)(),s=e.get("orderId"),[x,m]=(0,a.useState)(1),[p,u]=(0,a.useState)(c),[h,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(null),[j,y]=(0,a.useState)(""),[N,w]=(0,a.useState)("All"),[v,S]=(0,a.useState)([]),[C,P]=(0,a.useState)([]),[k,A]=(0,a.useState)(!1),[q,U]=(0,a.useState)(""),[M,D]=(0,a.useState)(""),[_,I]=(0,a.useState)({}),T=p.find(e=>e.id===f)??null,$=p.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())),O=d.filter(e=>{let t=e.name.toLowerCase().includes(j.toLowerCase())||e.reference.toLowerCase().includes(j.toLowerCase()),s="All"===N||e.category===N;return t&&s}),B=e=>{S(t=>{if(t.find(t=>t.productId===e))return t;let s=d.find(t=>t.id===e);return[...t,{productId:e,qty:1,unitPrice:s?.price??0}]})},F=(e,t)=>{S(s=>s.map(s=>s.productId===e?{...s,qty:Math.max(1,s.qty+t)}:s).filter(e=>e.qty>0))},E=(e,t)=>{S(s=>s.map(s=>s.productId===e?{...s,qty:Math.max(1,t)}:s))},L=e=>{P(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Z=(e,t)=>{S(s=>s.map(s=>s.productId===e?{...s,unitPrice:Math.max(0,t)}:s))},G=v.reduce((e,t)=>{let s=d.find(e=>e.id===t.productId);return s?e+(t.unitPrice??s.price)*t.qty:e},0);return(0,l.jsxs)("div",{className:"space-y-6",children:[l.jsx(i.Header,{role:"seller",name:"Seller Name"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-[minmax(0,2fr)_minmax(0,1fr)] gap-4",children:[(0,l.jsxs)("div",{className:"space-y-4",children:[l.jsx(r.Z,{className:"flex items-center gap-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-3 text-xs font-medium text-slate-600",children:[(0,l.jsxs)("button",{className:`flex items-center gap-2 rounded-full px-3 py-1 ${1===x?"bg-slate-900 text-white":"bg-slate-100"}`,onClick:()=>m(1),children:[l.jsx("span",{className:"h-5 w-5 rounded-full bg-white/20 flex items-center justify-center text-[11px]",children:"1"}),"Select client"]}),l.jsx("span",{className:"h-px w-10 bg-slate-200"}),(0,l.jsxs)("button",{className:`flex items-center gap-2 rounded-full px-3 py-1 ${2===x?"bg-slate-900 text-white":"bg-slate-100"}`,onClick:()=>T&&m(2),children:[l.jsx("span",{className:"h-5 w-5 rounded-full bg-white/20 flex items-center justify-center text-[11px]",children:"2"}),"Select products"]})]})}),1===x?(0,l.jsxs)(r.Z,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Select client"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Search existing clients or create a new one."})]}),l.jsx("button",{type:"button",onClick:()=>A(!0),className:"rounded-full bg-slate-900 text-white px-4 py-2 text-xs font-medium shadow-soft hover:bg-slate-800",children:"+ New client"})]}),l.jsx("div",{className:"mb-4",children:l.jsx("input",{type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"Search client by name or phone...",className:"w-full rounded-2xl border border-slate-200 bg-slate-50 px-4 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10"})}),l.jsx("div",{className:"space-y-2 max-h-72 overflow-y-auto",children:$.map(e=>(0,l.jsxs)("button",{onClick:()=>{b(e.id),m(2)},className:`w-full flex items-center justify-between rounded-2xl px-4 py-3 text-left text-xs hover:bg-slate-50 ${e.id===f?"border border-slate-900/10 bg-slate-50":"border border-transparent"}`,children:[(0,l.jsxs)("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:e.name}),l.jsx("p",{className:"text-slate-500",children:e.phone})]}),l.jsx("span",{className:"text-[11px] text-slate-400",children:"Select"})]},e.id))})]}):(0,l.jsxs)(r.Z,{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Select products"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Add items to the Bon de Commande."})]}),(0,l.jsxs)("div",{className:"text-xs text-slate-500",children:["Client:"," ",l.jsx("span",{className:"font-medium text-slate-800",children:T?.name})]})]}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-3",children:[l.jsx("input",{type:"text",value:j,onChange:e=>y(e.target.value),placeholder:"Search by name or reference...",className:"flex-1 rounded-2xl border border-slate-200 bg-slate-50 px-4 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10"}),l.jsx("div",{className:"flex gap-2 text-[11px]",children:["All","Sanitaire","Accessoires","Tuyaux","Others"].map(e=>l.jsx("button",{onClick:()=>w(e),className:`rounded-full px-3 py-1 ${N===e?"bg-slate-900 text-white":"bg-slate-100 text-slate-700"}`,children:e},e))})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-3",children:O.map(e=>{let t=v.some(t=>t.productId===e.id);return(0,l.jsxs)("button",{onClick:()=>B(e.id),className:`flex flex-col items-start rounded-2xl border px-3 py-3 text-left text-xs shadow-soft/40 transition ${t?"border-slate-900 bg-slate-50 shadow-soft":"border-slate-100 bg-white hover:shadow-soft"}`,children:[(0,l.jsxs)("div",{className:"relative mb-2 w-full overflow-hidden rounded-2xl bg-slate-50",children:[l.jsx("div",{className:"pt-[75%]"}),l.jsx("img",{src:e.imageUrl,alt:e.name,className:"absolute inset-0 h-full w-full object-cover"})]}),l.jsx("p",{className:"font-medium text-slate-800 line-clamp-2",children:e.name}),(0,l.jsxs)("p",{className:"mt-1 text-[11px] text-slate-400",children:["Ref. ",e.reference]}),(0,l.jsxs)("p",{className:"mt-2 text-sm font-semibold text-slate-900",children:[e.price.toFixed(2)," MAD"]}),l.jsx("span",{className:`mt-2 inline-flex rounded-full px-3 py-1 text-[11px] ${t?"bg-slate-200 text-slate-700":"bg-slate-900 text-white"}`,children:t?"Selected":"Add"})]},e.id)})})]})]}),(0,l.jsxs)(r.Z,{className:"space-y-4 bg-gradient-to-br from-pastel.yellow/70 via-white to-pastel.pink/70",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Bon de Commande"}),l.jsx("p",{className:"text-xs text-slate-500",children:"Review items and validate the order."})]}),T&&(0,l.jsxs)("div",{className:"text-[11px] text-right text-slate-500",children:[l.jsx("p",{className:"font-medium text-slate-800",children:T.name}),l.jsx("p",{children:T.phone})]})]}),l.jsx("div",{className:"space-y-2 max-h-[60vh] overflow-y-auto",children:0===v.length?l.jsx("p",{className:"text-xs text-slate-400",children:"No products yet. Add items from the left panel."}):v.map(e=>{let t=d.find(t=>t.id===e.productId),s=e.unitPrice??t.price,a=C.includes(e.productId);return(0,l.jsxs)("div",{className:`flex items-center justify-between rounded-2xl px-3 py-2 text-xs ${a?"bg-slate-100":"bg-white/70"}`,children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[l.jsx("input",{type:"checkbox",checked:a,onChange:()=>L(e.productId),className:"h-3 w-3 rounded border-slate-300 text-slate-900 focus:outline-none focus:ring-1 focus:ring-slate-500","aria-label":`Select ${t.name} for delete`}),l.jsx("div",{className:"relative h-9 w-9 overflow-hidden rounded-xl bg-slate-100",children:l.jsx("img",{src:t.imageUrl,alt:t.name,className:"absolute inset-0 h-full w-full object-cover"})}),(0,l.jsxs)("div",{children:[l.jsx("p",{className:"font-medium text-slate-800",children:t.name}),l.jsx("p",{className:"text-[11px] text-slate-400",children:t.reference})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{className:"inline-flex items-center rounded-full bg-slate-100 px-2 py-1",children:[l.jsx("button",{onClick:()=>F(t.id,-1),className:"px-2 text-[11px] text-slate-600",children:"âˆ’"}),l.jsx("input",{type:"text",inputMode:"numeric",value:e.qty,onChange:e=>E(t.id,Number(e.target.value)||1),className:"w-8 border-0 bg-transparent px-1 text-center text-[11px] font-medium text-slate-800 outline-none"}),l.jsx("button",{onClick:()=>F(t.id,1),className:"px-2 text-[11px] text-slate-600",children:"+"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("div",{className:"flex flex-col items-end gap-1 text-[11px] text-slate-500",children:[l.jsx("span",{className:"uppercase tracking-wide",children:"Unit price"}),(0,l.jsxs)("div",{className:"inline-flex items-center gap-1 rounded-lg border border-slate-200 bg-slate-50 px-2 py-1",children:[l.jsx("span",{className:"text-[10px] text-slate-400",children:"MAD"}),l.jsx("input",{type:"text",inputMode:"decimal",value:s,onChange:e=>Z(t.id,Number(e.target.value)||0),className:"w-20 bg-transparent text-right text-[11px] text-slate-700 outline-none"})]})]}),(0,l.jsxs)("p",{className:"mt-1 text-sm font-semibold text-slate-900",children:[(s*e.qty).toFixed(2)," MAD"]})]})]})]},e.productId)})}),(0,l.jsxs)("div",{className:"border-t border-slate-200 pt-3 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Total amount"}),(0,l.jsxs)("p",{className:"text-xl font-semibold text-slate-900",children:[G.toFixed(2)," MAD"]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[C.length>0&&(0,l.jsxs)("button",{type:"button",onClick:()=>{0!==C.length&&(S(e=>e.filter(e=>!C.includes(e.productId))),P([]))},className:"rounded-full bg-red-50 px-4 py-2 text-[11px] font-medium text-red-600 hover:bg-red-100",children:["Delete selected (",C.length,")"]}),l.jsx("button",{disabled:!T||0===v.length,onClick:()=>{if(!T||0===v.length)return;let e=s??`CMD-${Date.now().toString().slice(-6)}`,l=v.map(e=>{let t=d.find(t=>t.id===e.productId),s=e.unitPrice??t.price;return{productId:e.productId,name:t.name,reference:t.reference,quantity:e.qty,unitPrice:s}}),a={id:e,clientName:T.name,clientPhone:T.phone,sellerName:"Seller Name",date:new Date().toISOString().slice(0,10),status:"pending",totalAmount:G,items:l};(0,o.NX)(a),t.push("/seller")},className:"rounded-full bg-slate-900 text-white px-5 py-3 text-xs font-semibold shadow-soft disabled:opacity-40 disabled:cursor-not-allowed",children:"Validate Bon de Commande"})]})]})]})]}),k&&l.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:(0,l.jsxs)("div",{className:"w-full max-w-sm rounded-2xl bg-white p-5 shadow-xl",children:[l.jsx("h2",{className:"text-sm font-semibold text-slate-900",children:"Add new client"}),l.jsx("p",{className:"mt-1 text-xs text-slate-500",children:"Enter client information to use it in this Bon de Commande."}),(0,l.jsxs)("div",{className:"mt-4 space-y-3 text-xs",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{htmlFor:"new-client-name",className:"block text-[11px] font-medium text-slate-600",children:"Name"}),l.jsx("input",{id:"new-client-name",type:"text",value:q,onChange:e=>U(e.target.value),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10",placeholder:"Client full name or company"}),_.name&&l.jsx("p",{className:"mt-1 text-[11px] text-red-500",children:_.name})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{htmlFor:"new-client-phone",className:"block text-[11px] font-medium text-slate-600",children:"Phone"}),l.jsx("input",{id:"new-client-phone",type:"tel",value:M,onChange:e=>D(e.target.value),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10",placeholder:"+212 ..."}),_.phone&&l.jsx("p",{className:"mt-1 text-[11px] text-red-500",children:_.phone})]})]}),(0,l.jsxs)("div",{className:"mt-5 flex items-center justify-end gap-2",children:[l.jsx("button",{type:"button",onClick:()=>{A(!1),I({})},className:"rounded-full bg-slate-100 px-4 py-2 text-xs font-medium text-slate-700 hover:bg-slate-200",children:"Cancel"}),l.jsx("button",{type:"button",onClick:()=>{let e={};if(q.trim()||(e.name="Name is required."),M.trim()||(e.phone="Phone is required."),I(e),Object.keys(e).length>0)return;let t=`C${p.length+1}`,s={id:t,name:q.trim(),phone:M.trim()};u(e=>[...e,s]),b(t),m(2),U(""),D(""),I({}),A(!1)},className:"rounded-full bg-slate-900 px-5 py-2 text-xs font-semibold text-white shadow-soft hover:bg-slate-800",children:"Save client"})]})]})})]})}function m(){return l.jsx(a.Suspense,{fallback:l.jsx("div",{className:"p-6",children:"Loading..."}),children:l.jsx(x,{})})}},21021:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var l=s(10326);function a({children:e,className:t=""}){return l.jsx("section",{className:`glass-card p-5 md:p-6 bg-card/90 backdrop-blur-sm ${t}`,children:e})}},30360:(e,t,s)=>{"use strict";s.d(t,{NX:()=>n});let l=[{id:"CMD-1001",clientName:"John Doe",clientPhone:"+212 600-000000",sellerName:"Seller A",date:"2024-06-21",status:"pending",totalAmount:1475,items:[]},{id:"CMD-1002",clientName:"Jane Smith",clientPhone:"+212 611-123456",sellerName:"Seller B",date:"2024-06-21",status:"cancelled",totalAmount:875,items:[]}],a=new Set;function n(e){let t=l.findIndex(t=>t.id===e.id);t>=0?l[t]=e:l=[e,...l],function(){for(let e of a)e(l)}()}},27336:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>r,__esModule:()=>n,default:()=>i});var l=s(68570);let a=(0,l.createProxy)(String.raw`/Users/idjuo/Desktop/POS-inventory/app/seller/bon-de-commande/new/page.tsx`),{__esModule:n,$$typeof:r}=a;a.default;let i=(0,l.createProxy)(String.raw`/Users/idjuo/Desktop/POS-inventory/app/seller/bon-de-commande/new/page.tsx#default`)}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),l=t.X(0,[948,93,40],()=>s(99430));module.exports=l})();