"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[690],{17690:function(e,t,r){r.r(t),r.d(t,{default:function(){return q}});var s=r(57437),a=r(2265);let n=[{id:"w1",name:"Main Warehouse"},{id:"w2",name:"Secondary Warehouse"},{id:"w3",name:"Outlet Stockroom"}],o=[{id:"s1",name:"AquaFlow Distributors"},{id:"s2",name:"Sanitaire Pro Supply"},{id:"s3",name:"Metro Pipes & Fittings"},{id:"s4",name:"Premium Tools Co."},{id:"s5",name:"Universal Hardware"}];function i(e){var t;let r=function(e){let t=new Date;return t.setDate(t.getDate()-e),t.toISOString()}(null!==(t=e.createdDaysAgo)&&void 0!==t?t:10);return{id:"undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():"prod-".concat(Math.random().toString(36).slice(2,11)),createdAt:r,updatedAt:r,stockLog:[],...e}}let l=[i({name:"Premium Shower Set Chrome",sku:"SAN-001",reference:"REF-SAN-001",category:"Sanitary",purchasePrice:75,salePrice:129,stock:42,minStock:10,supplierId:"s2",supplierName:"Sanitaire Pro Supply",warehouseId:"w1",warehouseName:"Main Warehouse",status:"active"}),i({name:"Wall Mounted Basin Mixer",sku:"SAN-002",reference:"REF-SAN-002",category:"Sanitary",purchasePrice:55,salePrice:95,stock:12,minStock:8,supplierId:"s2",supplierName:"Sanitaire Pro Supply",warehouseId:"w1",warehouseName:"Main Warehouse",status:"active",createdDaysAgo:5}),i({name:"Flexible Shower Hose 1.5m",sku:"ACC-010",reference:"REF-ACC-010",category:"Accessories",purchasePrice:8,salePrice:19,stock:6,minStock:10,supplierId:"s1",supplierName:"AquaFlow Distributors",warehouseId:"w2",warehouseName:"Secondary Warehouse",status:"active",createdDaysAgo:15}),i({name:"Stainless Steel Floor Drain",sku:"ACC-011",reference:"REF-ACC-011",category:"Accessories",purchasePrice:6,salePrice:15,stock:0,minStock:5,supplierId:"s1",supplierName:"AquaFlow Distributors",warehouseId:"w2",warehouseName:"Secondary Warehouse",status:"active",createdDaysAgo:25}),i({name:"PVC Pipe 32mm - 4m",sku:"PIP-032",reference:"REF-PIP-032",category:"Pipes",purchasePrice:4,salePrice:9,stock:180,minStock:60,supplierId:"s3",supplierName:"Metro Pipes & Fittings",warehouseId:"w1",warehouseName:"Main Warehouse",status:"active"}),i({name:"PVC Pipe 50mm - 4m",sku:"PIP-050",reference:"REF-PIP-050",category:"Pipes",purchasePrice:6,salePrice:13,stock:22,minStock:40,supplierId:"s3",supplierName:"Metro Pipes & Fittings",warehouseId:"w1",warehouseName:"Main Warehouse",status:"active"}),i({name:"Copper Pipe 15mm - 3m",sku:"PIP-115",reference:"REF-PIP-115",category:"Pipes",purchasePrice:11,salePrice:24,stock:5,minStock:15,supplierId:"s3",supplierName:"Metro Pipes & Fittings",warehouseId:"w2",warehouseName:"Secondary Warehouse",status:"active"}),i({name:'Adjustable Pipe Wrench 14"',sku:"TLS-014",reference:"REF-TLS-014",category:"Tools",purchasePrice:19,salePrice:39,stock:17,minStock:6,supplierId:"s4",supplierName:"Premium Tools Co.",warehouseId:"w3",warehouseName:"Outlet Stockroom",status:"active"}),i({name:'Adjustable Pipe Wrench 18"',sku:"TLS-018",reference:"REF-TLS-018",category:"Tools",purchasePrice:24,salePrice:49,stock:9,minStock:6,supplierId:"s4",supplierName:"Premium Tools Co.",warehouseId:"w3",warehouseName:"Outlet Stockroom",status:"active"}),i({name:"PTFE Thread Seal Tape",sku:"OTH-001",reference:"REF-OTH-001",category:"Others",purchasePrice:.5,salePrice:1.5,stock:340,minStock:200,supplierId:"s5",supplierName:"Universal Hardware",warehouseId:"w1",warehouseName:"Main Warehouse",status:"active"}),i({name:"Water Heater Safety Valve",sku:"SAN-050",reference:"REF-SAN-050",category:"Sanitary",purchasePrice:18,salePrice:35,stock:3,minStock:10,supplierId:"s2",supplierName:"Sanitaire Pro Supply",warehouseId:"w2",warehouseName:"Secondary Warehouse",status:"active"}),i({name:"Bathroom Accessory Set Matte Black",sku:"ACC-050",reference:"REF-ACC-050",category:"Accessories",purchasePrice:32,salePrice:69,stock:8,minStock:5,supplierId:"s1",supplierName:"AquaFlow Distributors",warehouseId:"w2",warehouseName:"Secondary Warehouse",status:"active"}),i({name:"Under-sink Trap Kit 40mm",sku:"SAN-030",reference:"REF-SAN-030",category:"Sanitary",purchasePrice:9,salePrice:21,stock:25,minStock:12,supplierId:"s2",supplierName:"Sanitaire Pro Supply",warehouseId:"w1",warehouseName:"Main Warehouse",status:"active"}),i({name:'Compression Fitting Elbow 1/2"',sku:"PIP-210",reference:"REF-PIP-210",category:"Pipes",purchasePrice:1.2,salePrice:2.8,stock:260,minStock:120,supplierId:"s3",supplierName:"Metro Pipes & Fittings",warehouseId:"w1",warehouseName:"Main Warehouse",status:"active"}),i({name:'Compression Fitting Tee 1/2"',sku:"PIP-211",reference:"REF-PIP-211",category:"Pipes",purchasePrice:1.4,salePrice:3.1,stock:140,minStock:120,supplierId:"s3",supplierName:"Metro Pipes & Fittings",warehouseId:"w1",warehouseName:"Main Warehouse",status:"active"}),i({name:"Safety Gloves Nitrile Grip",sku:"TLS-060",reference:"REF-TLS-060",category:"Tools",purchasePrice:4.5,salePrice:9.5,stock:58,minStock:20,supplierId:"s4",supplierName:"Premium Tools Co.",warehouseId:"w3",warehouseName:"Outlet Stockroom",status:"active"}),i({name:"Pipe Cutter 3-28mm",sku:"TLS-070",reference:"REF-TLS-070",category:"Tools",purchasePrice:15,salePrice:32,stock:0,minStock:5,supplierId:"s4",supplierName:"Premium Tools Co.",warehouseId:"w3",warehouseName:"Outlet Stockroom",status:"inactive"}),i({name:"Wall Plug & Screw Kit",sku:"OTH-020",reference:"REF-OTH-020",category:"Others",purchasePrice:3.2,salePrice:7.5,stock:95,minStock:40,supplierId:"s5",supplierName:"Universal Hardware",warehouseId:"w2",warehouseName:"Secondary Warehouse",status:"active"}),i({name:"Corner Shower Shelf Glass",sku:"ACC-090",reference:"REF-ACC-090",category:"Accessories",purchasePrice:14,salePrice:32,stock:14,minStock:8,supplierId:"s1",supplierName:"AquaFlow Distributors",warehouseId:"w2",warehouseName:"Secondary Warehouse",status:"active"}),i({name:"Floor Standing Cabinet White",sku:"OTH-100",reference:"REF-OTH-100",category:"Others",purchasePrice:65,salePrice:129,stock:4,minStock:4,supplierId:"s5",supplierName:"Universal Hardware",warehouseId:"w1",warehouseName:"Main Warehouse",status:"active",createdDaysAgo:2})];var c=r(404),d=r(78030);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,d.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),p=(0,d.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),m=(0,d.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),x=[{id:"all",label:"All"},{id:"low-stock",label:"Low stock"},{id:"out-of-stock",label:"Out of stock"},{id:"inactive",label:"Inactive"}];function h(e){let{selectedQuickFilter:t,onQuickFilterChange:r,onAddProduct:a,onExportAll:n,onImport:o}=e;return(0,s.jsxs)("header",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Inventory"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your products, stock levels, and categories."}),(0,s.jsx)("div",{className:"mt-3 inline-flex flex-wrap gap-2",children:x.map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>r(e.id),className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-xs font-medium transition ".concat(t===e.id?"bg-primary text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"," focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"),"aria-pressed":t===e.id,children:[(0,s.jsx)(c.Z,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:e.label})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-end gap-2",children:[(0,s.jsxs)("button",{type:"button",onClick:n,className:"inline-flex items-center gap-2 rounded-xl bg-white px-3 py-2 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","aria-label":"Export inventory",children:[(0,s.jsx)(u,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Export"})]}),(0,s.jsxs)("button",{type:"button",onClick:o,className:"inline-flex items-center gap-2 rounded-xl bg-white px-3 py-2 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2","aria-label":"Import products",children:[(0,s.jsx)(p,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Import"})]}),(0,s.jsxs)("button",{type:"button",onClick:a,className:"inline-flex items-center gap-2 rounded-2xl bg-primary px-4 py-2 text-sm font-semibold text-white shadow-lg hover:bg-[#1558b1] focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:[(0,s.jsx)(m,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"+ Add New Product"})]})]})]})}/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,d.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);function y(e){let[t,r]=(0,a.useState)(!1),n=(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-6",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"inventory-search",children:"Search"}),(0,s.jsx)("input",{id:"inventory-search",type:"search",value:e.search,onChange:t=>e.onSearchChange(t.target.value),placeholder:"Search by name or reference",className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"inventory-category",children:"Category"}),(0,s.jsxs)("select",{id:"inventory-category",value:e.category,onChange:t=>e.onCategoryChange(t.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"All",children:"All categories"}),(0,s.jsx)("option",{value:"Sanitary",children:"Sanitary"}),(0,s.jsx)("option",{value:"Accessories",children:"Accessories"}),(0,s.jsx)("option",{value:"Pipes",children:"Pipes"}),(0,s.jsx)("option",{value:"Tools",children:"Tools"}),(0,s.jsx)("option",{value:"Others",children:"Others"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"inventory-stock",children:"Stock"}),(0,s.jsxs)("select",{id:"inventory-stock",value:e.stockFilter,onChange:t=>e.onStockFilterChange(t.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"all",children:"All"}),(0,s.jsx)("option",{value:"low",children:"Low stock"}),(0,s.jsx)("option",{value:"out",children:"Out of stock"}),(0,s.jsx)("option",{value:"in",children:"In stock"})]})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"inventory-supplier",children:"Supplier"}),(0,s.jsxs)("select",{id:"inventory-supplier",value:e.supplierId,onChange:t=>e.onSupplierChange(t.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"All",children:"All suppliers"}),e.suppliers.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"inventory-warehouse",children:"Warehouse"}),(0,s.jsxs)("select",{id:"inventory-warehouse",value:e.warehouseId,onChange:t=>e.onWarehouseChange(t.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"All",children:"All warehouses"}),e.warehouses.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"md:col-span-1",children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"inventory-sort",children:"Sort by"}),(0,s.jsxs)("select",{id:"inventory-sort",value:e.sort,onChange:t=>e.onSortChange(t.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 bg-white px-3 py-2 text-sm text-gray-900 shadow-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"name-asc",children:"Name A → Z"}),(0,s.jsx)("option",{value:"stock-desc",children:"Stock (high → low)"}),(0,s.jsx)("option",{value:"price-desc",children:"Price (high → low)"}),(0,s.jsx)("option",{value:"newest",children:"Newest"})]})]})]});return(0,s.jsxs)("section",{className:"rounded-2xl bg-white p-4 shadow-lg",children:[(0,s.jsx)("div",{className:"hidden md:block",children:n}),(0,s.jsxs)("div",{className:"md:hidden",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>r(e=>!e),className:"flex w-full items-center justify-between rounded-xl border border-gray-200 bg-gray-50 px-3 py-2 text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary","aria-expanded":t,"aria-controls":"inventory-filters-panel",children:[(0,s.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),"Filters"]}),(0,s.jsx)(g,{className:"h-4 w-4 transition-transform ".concat(t?"rotate-180":"")})]}),t&&(0,s.jsx)("div",{id:"inventory-filters-panel",className:"mt-3 space-y-3",children:n})]})]})}var f=r(1705);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,d.Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),w=(0,d.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),j=(0,d.Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);function k(e){let{totalProducts:t,lowStockCount:r,outOfStockCount:a,newProductsCount:n}=e,o=[{id:"total",label:"Total products",value:t,icon:f.Z,bg:"bg-gradient-to-br from-sky-50 to-sky-100",accent:"bg-sky-500/10 text-sky-600"},{id:"low",label:"Low stock alerts",value:r,icon:b,bg:"bg-gradient-to-br from-amber-50 to-amber-100",accent:"bg-amber-500/10 text-amber-600"},{id:"out",label:"Out of stock",value:a,icon:w,bg:"bg-gradient-to-br from-rose-50 to-rose-100",accent:"bg-rose-500/10 text-rose-600"},{id:"new",label:"New products (30d)",value:n,icon:j,bg:"bg-gradient-to-br from-emerald-50 to-emerald-100",accent:"bg-emerald-500/10 text-emerald-600"}];return(0,s.jsx)("section",{className:"grid grid-cols-1 gap-4 md:grid-cols-4",children:o.map(e=>{let t=e.icon;return(0,s.jsxs)("article",{className:"flex items-center justify-between rounded-xl border border-white/60 p-4 shadow-md ".concat(e.bg),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-700",children:e.label}),(0,s.jsx)("p",{className:"mt-2 text-2xl font-semibold text-gray-900",children:e.value})]}),(0,s.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full ".concat(e.accent),children:(0,s.jsx)(t,{className:"h-5 w-5"})})]},e.id)})})}/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let v=(0,d.Z)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]),N=(0,d.Z)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);var S=r(70518);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let P=(0,d.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),C=(0,d.Z)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),I=(0,d.Z)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),A=(0,d.Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),F=(0,d.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var M=r(10883);function D(e){let{product:t,selected:r,onToggleSelect:n,onEdit:o,onDuplicate:i,onDelete:l,onHistory:c}=e,d=0===t.stock?"out":t.stock<=t.minStock?"low":"ok",[u,p]=(0,a.useState)(!1),m=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!u)return;let e=e=>{m.current&&!m.current.contains(e.target)&&p(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[u]);let x=e=>{e(),p(!1)};return(0,s.jsxs)("tr",{className:"border-b border-gray-100 bg-white text-sm text-gray-700 hover:bg-gray-50 hover:shadow-sm",children:[(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:outline-none focus:ring-2 focus:ring-primary",checked:r,onChange:n,"aria-label":"Select ".concat(t.name)})}),(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-xl bg-gray-100 flex items-center justify-center","aria-hidden":"true",children:t.imageUrl?(0,s.jsx)("img",{src:t.imageUrl,alt:t.name,className:"h-full w-full object-cover"}):(0,s.jsx)("span",{className:"text-[10px] text-gray-400",children:"IMG"})})}),(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:t.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:t.reference})]})}),(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)("span",{className:"inline-flex rounded-full bg-gray-100 px-2.5 py-1 text-xs font-medium text-gray-700",children:t.category})}),(0,s.jsx)("td",{className:"px-3 py-3 text-xs text-gray-700",children:t.warehouseName}),(0,s.jsxs)("td",{className:"px-3 py-3 text-sm text-gray-700",children:[t.purchasePrice.toFixed(2)," ",(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"MAD"})]}),(0,s.jsxs)("td",{className:"px-3 py-3 text-sm text-gray-700",children:[t.salePrice.toFixed(2)," ",(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"MAD"})]}),(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsxs)("span",{className:"inline-flex rounded-full px-2.5 py-1 text-xs font-semibold ".concat("out"===d?"bg-red-50 text-red-600":"low"===d?"bg-amber-50 text-amber-600":"bg-emerald-50 text-emerald-600"),children:[t.stock," in stock"]})})}),(0,s.jsx)("td",{className:"px-3 py-3 text-xs text-gray-700",children:t.supplierName}),(0,s.jsx)("td",{className:"px-3 py-3",children:(0,s.jsx)("span",{className:"inline-flex rounded-full px-2.5 py-1 text-xs font-semibold ".concat("active"===t.status?"bg-emerald-50 text-emerald-600":"bg-gray-100 text-gray-600"),children:"active"===t.status?"Active":"Inactive"})}),(0,s.jsx)("td",{className:"relative px-3 py-3 text-right",children:(0,s.jsxs)("div",{ref:m,className:"inline-flex items-center gap-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>p(e=>!e),className:"inline-flex h-7 w-7 items-center justify-center rounded-lg bg-gray-50 text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Row actions",children:(0,s.jsx)(C,{className:"h-4 w-4"})}),u&&(0,s.jsxs)("div",{className:"absolute right-0 top-9 z-10 w-40 rounded-lg border border-gray-100 bg-white py-1 text-xs text-gray-700 shadow-lg",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>x(o),className:"flex w-full items-center gap-2 px-3 py-1.5 text-left hover:bg-gray-50",children:[(0,s.jsx)(I,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Edit"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>x(i),className:"flex w-full items-center gap-2 px-3 py-1.5 text-left hover:bg-gray-50",children:[(0,s.jsx)(A,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Duplicate"})]}),(0,s.jsxs)("button",{type:"button",onClick:()=>x(c),className:"flex w-full items-center gap-2 px-3 py-1.5 text-left hover:bg-gray-50",children:[(0,s.jsx)(F,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"History"})]}),(0,s.jsx)("div",{className:"my-1 border-t border-gray-100"}),(0,s.jsxs)("button",{type:"button",onClick:()=>x(l),className:"flex w-full items-center gap-2 px-3 py-1.5 text-left text-red-600 hover:bg-red-50",children:[(0,s.jsx)(M.Z,{className:"h-3 w-3"}),(0,s.jsx)("span",{children:"Delete"})]})]})]})})]})}function E(e){let{products:t,selectedIds:r,sort:a,page:n,pageSize:o,totalCount:i,pageSizeOptions:l,onToggleSelect:c,onToggleSelectAll:d,onChangeSort:p,onChangePage:m,onChangePageSize:x,onEditProduct:h,onDuplicateProduct:g,onDeleteProduct:y,onOpenHistory:f,onExportVisible:b,onPrintVisible:w}=e,j=Math.max(1,Math.ceil(i/o)),k=t.length>0&&t.every(e=>r.has(e.id)),C=e=>{a!==e&&p(e)};return(0,s.jsxs)("section",{className:"rounded-2xl bg-white p-4 shadow-lg",children:[(0,s.jsxs)("div",{className:"mb-3 flex flex-wrap items-center justify-between gap-2",children:[(0,s.jsxs)("h2",{className:"text-sm font-semibold text-gray-900",children:["Products (",i,")"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{type:"button",onClick:b,className:"inline-flex items-center gap-1 rounded-xl bg-gray-50 px-3 py-1.5 text-xs font-medium text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)(u,{className:"h-4 w-4"}),"Export CSV"]}),(0,s.jsxs)("button",{type:"button",onClick:w,className:"inline-flex items-center gap-1 rounded-xl bg-gray-50 px-3 py-1.5 text-xs font-medium text-gray-800 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)(v,{className:"h-4 w-4"}),"Print"]})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full border-separate border-spacing-0 text-left text-xs text-gray-500",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-gray-50 text-[11px] font-medium uppercase tracking-wide text-gray-500",children:[(0,s.jsx)("th",{className:"sticky left-0 z-10 bg-gray-50 px-3 py-3",children:(0,s.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Select all",checked:k,onChange:d})}),(0,s.jsx)("th",{className:"px-3 py-3",children:"Image"}),(0,s.jsx)("th",{className:"px-3 py-3",children:(0,s.jsxs)("button",{type:"button",onClick:()=>C("name-asc"),className:"inline-flex items-center gap-1 text-[11px] font-medium uppercase tracking-wide text-gray-500 hover:text-gray-800 focus:outline-none",children:["Product",(0,s.jsx)(N,{className:"h-3 w-3"})]})}),(0,s.jsx)("th",{className:"px-3 py-3",children:"Category"}),(0,s.jsx)("th",{className:"px-3 py-3",children:"Warehouse"}),(0,s.jsx)("th",{className:"px-3 py-3",children:(0,s.jsxs)("button",{type:"button",onClick:()=>C("price-desc"),className:"inline-flex items-center gap-1 hover:text-gray-800 focus:outline-none",children:["Purchase",(0,s.jsx)(N,{className:"h-3 w-3"})]})}),(0,s.jsx)("th",{className:"px-3 py-3",children:"Sale"}),(0,s.jsx)("th",{className:"px-3 py-3",children:(0,s.jsxs)("button",{type:"button",onClick:()=>C("stock-desc"),className:"inline-flex items-center gap-1 hover:text-gray-800 focus:outline-none",children:["Stock",(0,s.jsx)(N,{className:"h-3 w-3"})]})}),(0,s.jsx)("th",{className:"px-3 py-3",children:"Supplier"}),(0,s.jsx)("th",{className:"px-3 py-3",children:"Status"}),(0,s.jsx)("th",{className:"px-3 py-3 text-right",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:t.map(e=>(0,s.jsx)(D,{product:e,selected:r.has(e.id),onToggleSelect:()=>c(e.id),onEdit:()=>h(e),onDuplicate:()=>g(e),onDelete:()=>y(e),onHistory:()=>f(e)},e.id))})]})}),(0,s.jsxs)("div",{className:"mt-4 flex flex-col items-center justify-between gap-3 border-t border-gray-100 pt-3 text-xs text-gray-600 md:flex-row",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:"Rows per page"}),(0,s.jsx)("select",{value:o,onChange:e=>x(Number(e.target.value)),className:"rounded-lg border border-gray-200 bg-white px-2 py-1 text-xs focus:outline-none focus:ring-2 focus:ring-primary",children:l.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{children:["Page ",n," of ",j]}),(0,s.jsxs)("div",{className:"inline-flex items-center gap-1 rounded-xl border border-gray-200 bg-gray-50 px-1 py-0.5",children:[(0,s.jsx)("button",{type:"button",onClick:()=>m(Math.max(1,n-1)),disabled:1===n,className:"inline-flex h-7 w-7 items-center justify-center rounded-lg text-gray-600 hover:bg-white disabled:cursor-not-allowed disabled:text-gray-400","aria-label":"Previous page",children:(0,s.jsx)(S.Z,{className:"h-4 w-4"})}),(0,s.jsx)("button",{type:"button",onClick:()=>m(Math.min(j,n+1)),disabled:n===j,className:"inline-flex h-7 w-7 items-center justify-center rounded-lg text-gray-600 hover:bg-white disabled:cursor-not-allowed disabled:text-gray-400","aria-label":"Next page",children:(0,s.jsx)(P,{className:"h-4 w-4"})})]})]})]})]})}function T(e){let{selectedCount:t,onDeleteSelected:r,onExportSelected:a,onSetInactive:n,onChangeCategory:o,onUpdateSupplier:i}=e;return 0===t?null:(0,s.jsxs)("div",{className:"sticky top-4 z-30 mb-3 flex items-center justify-between rounded-2xl bg-gray-900 px-4 py-3 text-xs text-white shadow-lg",children:[(0,s.jsxs)("p",{className:"font-medium",children:[t," product",t>1?"s":""," selected"]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)("button",{type:"button",onClick:r,className:"rounded-xl bg-red-500 px-3 py-1.5 text-xs font-semibold text-white hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2 focus:ring-offset-gray-900",children:"Delete selected"}),(0,s.jsx)("button",{type:"button",onClick:a,className:"rounded-xl bg-white px-3 py-1.5 text-xs font-semibold text-gray-900 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-gray-900",children:"Export CSV"}),(0,s.jsx)("button",{type:"button",onClick:o,className:"rounded-xl border border-white/30 px-3 py-1.5 text-xs font-semibold hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-gray-900",children:"Change category"}),(0,s.jsx)("button",{type:"button",onClick:i,className:"rounded-xl border border-white/30 px-3 py-1.5 text-xs font-semibold hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-gray-900",children:"Update supplier"}),(0,s.jsx)("button",{type:"button",onClick:n,className:"rounded-xl border border-white/30 px-3 py-1.5 text-xs font-semibold hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-gray-900",children:"Set inactive"})]})]})}var L=r(74697);let U={name:"",reference:"",description:"",category:"Sanitary",purchasePrice:0,salePrice:0,taxRate:20,stock:0,minStock:0,supplierId:"",supplierName:"",warehouseId:"",warehouseName:"",status:"active",imageUrl:void 0};function O(e){let{open:t,mode:r,product:n,suppliers:o,warehouses:i,onClose:l,onSave:c}=e,[d,u]=(0,a.useState)("general"),[p,m]=(0,a.useState)(U),[x,h]=(0,a.useState)(0),[g,y]=(0,a.useState)(""),[f,b]=(0,a.useState)({}),w=(0,a.useRef)(null);if((0,a.useEffect)(()=>{t&&(u("general"),n?m({name:n.name,reference:n.reference,description:"",category:n.category,purchasePrice:n.purchasePrice,salePrice:n.salePrice,taxRate:20,stock:n.stock,minStock:n.minStock,supplierId:n.supplierId,supplierName:n.supplierName,warehouseId:n.warehouseId,warehouseName:n.warehouseName,status:n.status,imageUrl:n.imageUrl}):m(U))},[t,n]),(0,a.useEffect)(()=>{if(!t)return;let e=e=>{"Escape"===e.key&&l()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,l]),!t)return null;let j=(e,t)=>{m(r=>({...r,[e]:t}))},k=()=>{let e={};return p.name.trim()||(e.name="Product name is required."),p.reference.trim()||(e.reference="Reference is required."),p.category||(e.category="Category is required."),p.salePrice<=0&&(e.salePrice="Sale price must be > 0."),p.supplierId||(e.supplierId="Supplier is required."),p.warehouseId||(e.warehouseId="Warehouse is required."),b(e),0===Object.keys(e).length};return(0,s.jsx)("div",{className:"fixed inset-0 z-40 flex items-stretch justify-end bg-black/40",onClick:e=>{e.target===e.currentTarget&&l()},children:(0,s.jsxs)("aside",{className:"flex h-full w-full max-w-md flex-col bg-white shadow-2xl",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between border-b border-gray-100 px-5 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-sm font-semibold text-gray-900",children:"create"===r?"Add new product":"Edit product"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"General information, pricing, stock, supplier, and media."})]}),(0,s.jsx)("button",{type:"button",onClick:l,className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-gray-500 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Close product drawer",children:(0,s.jsx)(L.Z,{className:"h-4 w-4"})})]}),(0,s.jsx)("nav",{className:"flex gap-2 border-b border-gray-100 px-4 pb-2 pt-3 text-xs font-medium text-gray-600",children:[{id:"general",label:"General"},{id:"pricing",label:"Pricing"},{id:"stock",label:"Stock"},{id:"supplier",label:"Supplier"},{id:"media",label:"Media"}].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>u(e.id),className:"rounded-full px-3 py-1 ".concat(d===e.id?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"," focus:outline-none focus:ring-2 focus:ring-primary"),children:e.label},e.id))}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto px-5 py-4 space-y-6",children:["general"===d&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-name",children:"Product name"}),(0,s.jsx)("input",{id:"pd-name",type:"text",value:p.name,onChange:e=>j("name",e.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"}),f.name&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-ref",children:"Reference / SKU"}),(0,s.jsx)("input",{id:"pd-ref",type:"text",value:p.reference,onChange:e=>j("reference",e.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"}),f.reference&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.reference})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-desc",children:"Description"}),(0,s.jsx)("textarea",{id:"pd-desc",value:p.description,onChange:e=>j("description",e.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary",rows:3})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-category",children:"Category"}),(0,s.jsxs)("select",{id:"pd-category",value:p.category,onChange:e=>j("category",e.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"Sanitary",children:"Sanitary"}),(0,s.jsx)("option",{value:"Accessories",children:"Accessories"}),(0,s.jsx)("option",{value:"Pipes",children:"Pipes"}),(0,s.jsx)("option",{value:"Tools",children:"Tools"}),(0,s.jsx)("option",{value:"Others",children:"Others"})]}),f.category&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.category})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-status",children:"Status"}),(0,s.jsxs)("select",{id:"pd-status",value:p.status,onChange:e=>j("status",e.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"active",children:"Active"}),(0,s.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]})]}),"pricing"===d&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-purchase",children:"Purchase price (MAD)"}),(0,s.jsx)("input",{id:"pd-purchase",type:"number",min:0,value:p.purchasePrice,onChange:e=>j("purchasePrice",Number(e.target.value)),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-sale",children:"Sale price (MAD)"}),(0,s.jsx)("input",{id:"pd-sale",type:"number",min:0,value:p.salePrice,onChange:e=>j("salePrice",Number(e.target.value)),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"}),f.salePrice&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.salePrice})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-tax",children:"Tax rate (%)"}),(0,s.jsx)("input",{id:"pd-tax",type:"number",min:0,max:100,value:p.taxRate,onChange:e=>j("taxRate",Number(e.target.value)),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),"stock"===d&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-stock",children:"Current stock"}),(0,s.jsx)("input",{id:"pd-stock",type:"number",min:0,value:p.stock,onChange:e=>j("stock",Number(e.target.value)),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-min-stock",children:"Min stock alert"}),(0,s.jsx)("input",{id:"pd-min-stock",type:"number",min:0,value:p.minStock,onChange:e=>j("minStock",Number(e.target.value)),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-warehouse",children:"Warehouse"}),(0,s.jsxs)("select",{id:"pd-warehouse",value:p.warehouseId,onChange:e=>{let t=e.target.value,r=i.find(e=>e.id===t);j("warehouseId",t),j("warehouseName",r?r.name:"")},className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"",children:"Select warehouse"}),i.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),f.warehouseId&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.warehouseId})]}),(0,s.jsxs)("div",{className:"rounded-xl bg-gray-50 p-3",children:[(0,s.jsx)("p",{className:"text-xs font-semibold text-gray-800",children:"Quick stock adjustment"}),(0,s.jsx)("p",{className:"mt-1 text-[11px] text-gray-500",children:"Increase or decrease stock and keep a log of the reason."}),(0,s.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[11px] font-medium text-gray-600",htmlFor:"pd-add-stock",children:"Quantity (+/-)"}),(0,s.jsx)("input",{id:"pd-add-stock",type:"number",value:x,onChange:e=>h(Number(e.target.value||0)),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-xs text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-[11px] font-medium text-gray-600",htmlFor:"pd-add-note",children:"Reason / Note"}),(0,s.jsx)("input",{id:"pd-add-note",type:"text",value:g,onChange:e=>y(e.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-xs text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"})]})]})]})]}),"supplier"===d&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"pd-supplier",children:"Supplier"}),(0,s.jsxs)("select",{id:"pd-supplier",value:p.supplierId,onChange:e=>{let t=e.target.value,r=o.find(e=>e.id===t);j("supplierId",t),j("supplierName",r?r.name:"")},className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary",children:[(0,s.jsx)("option",{value:"",children:"Select supplier"}),o.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),f.supplierId&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:f.supplierId})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["TODO: Link this section with your real suppliers table or API, e.g. ",(0,s.jsx)("code",{className:"rounded bg-gray-100 px-1 py-0.5",children:"fetch('/api/suppliers')"}),"."]})]}),"media"===d&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",children:"Product image"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"h-16 w-16 overflow-hidden rounded-xl bg-gray-100 flex items-center justify-center",children:p.imageUrl?(0,s.jsx)("img",{src:p.imageUrl,alt:p.name||"Product image",className:"h-full w-full object-cover"}):(0,s.jsx)("span",{className:"text-[10px] text-gray-400",children:"No image"})}),(0,s.jsxs)("div",{className:"space-y-2 text-xs text-gray-500",children:[(0,s.jsx)("p",{children:"Upload a product photo from your phone or camera."}),(0,s.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},className:"rounded-xl bg-gray-900 px-3 py-1.5 text-xs font-semibold text-white hover:bg-black focus:outline-none focus:ring-2 focus:ring-primary",children:"Upload image"}),(0,s.jsx)("input",{ref:w,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!r||!r.type.startsWith("image/"))return;let s=new FileReader;s.onload=()=>{j("imageUrl",s.result)},s.readAsDataURL(r)}})]})]})]}),(0,s.jsx)("p",{className:"text-[11px] text-gray-500",children:"For this template we store the image in-memory. In production, upload the original photo and generate optimized thumbnails (e.g. 400\xd7400) on your backend or image CDN."})]})]}),(0,s.jsxs)("footer",{className:"flex items-center justify-between border-t border-gray-100 px-5 py-4",children:[(0,s.jsx)("button",{type:"button",onClick:l,className:"rounded-xl bg-gray-100 px-4 py-2 text-xs font-semibold text-gray-800 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-primary",children:"Cancel"}),(0,s.jsx)("button",{type:"button",onClick:()=>{if(!k())return;let e=[];if(0!==x){var t;e.push({id:"".concat(Date.now(),"-").concat(Math.random()),productId:null!==(t=null==n?void 0:n.id)&&void 0!==t?t:"temp",date:new Date().toISOString(),action:x>0?"Added":"Adjusted",quantity:x,user:"Manager",note:g||"Manual stock adjustment"})}c(p,e),h(0),y("")},className:"rounded-2xl bg-primary px-5 py-2 text-xs font-semibold text-white shadow-lg hover:bg-[#1558b1] focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:"Save product"})]})]})})}function R(e){let{productName:t,entries:r,onClose:n}=e,[o,i]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),d=(0,a.useMemo)(()=>{let e=o?new Date(o):null,t=l?new Date(l):null;return r.filter(r=>{let s=new Date(r.date);return(!e||!(s<e))&&(!t||!(s>t))})},[r,o,l]);return(0,s.jsx)("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40 px-4 py-6",children:(0,s.jsxs)("div",{className:"max-h-full w-full max-w-3xl overflow-hidden rounded-2xl bg-white shadow-2xl",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between border-b border-gray-100 px-5 py-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-sm font-semibold text-gray-900",children:["Stock movement \xb7 ",t]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"View and export all stock adjustments for this product."})]}),(0,s.jsx)("button",{type:"button",onClick:n,className:"inline-flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-gray-500 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-primary","aria-label":"Close stock history",children:(0,s.jsx)(L.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"space-y-4 px-5 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"log-from",children:"From"}),(0,s.jsx)("input",{id:"log-from",type:"date",value:o,onChange:e=>i(e.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-xs text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-600",htmlFor:"log-to",children:"To"}),(0,s.jsx)("input",{id:"log-to",type:"date",value:l,onChange:e=>c(e.target.value),className:"mt-1 w-full rounded-xl border border-gray-200 px-3 py-2 text-xs text-gray-900 focus:outline-none focus:ring-2 focus:ring-primary"})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)("button",{type:"button",onClick:()=>{window.print()},className:"w-full rounded-xl bg-gray-900 px-3 py-2 text-xs font-semibold text-white shadow-sm hover:bg-black focus:outline-none focus:ring-2 focus:ring-primary",children:"Print / Export visible"})})]}),(0,s.jsx)("div",{className:"max-h-80 overflow-auto rounded-xl border border-gray-100",children:(0,s.jsxs)("table",{className:"min-w-full border-separate border-spacing-0 text-left text-xs text-gray-600",children:[(0,s.jsx)("thead",{className:"bg-gray-50 text-[11px] font-medium uppercase tracking-wide text-gray-500",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 py-2",children:"Date"}),(0,s.jsx)("th",{className:"px-3 py-2",children:"Action"}),(0,s.jsx)("th",{className:"px-3 py-2",children:"Qty"}),(0,s.jsx)("th",{className:"px-3 py-2",children:"User"}),(0,s.jsx)("th",{className:"px-3 py-2",children:"Note"})]})}),(0,s.jsxs)("tbody",{children:[d.map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 bg-white",children:[(0,s.jsx)("td",{className:"px-3 py-2",children:new Date(e.date).toLocaleString()}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsx)("span",{className:"inline-flex rounded-full px-2.5 py-1 text-[11px] font-semibold ".concat("Added"===e.action?"bg-emerald-50 text-emerald-600":"Sold"===e.action?"bg-red-50 text-red-600":"bg-indigo-50 text-indigo-600"),children:e.action})}),(0,s.jsx)("td",{className:"px-3 py-2",children:(0,s.jsx)("span",{className:e.quantity>=0?"text-emerald-700":"text-red-600",children:e.quantity>0?"+".concat(e.quantity):e.quantity})}),(0,s.jsx)("td",{className:"px-3 py-2",children:e.user}),(0,s.jsx)("td",{className:"px-3 py-2",children:e.note})]},e.id)),0===d.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:5,className:"px-3 py-6 text-center text-xs text-gray-400",children:"No stock movements in the selected range."})})]})]})})]})]})})}function Z(e){let{onAddProduct:t}=e;return(0,s.jsxs)("section",{className:"flex flex-col items-center justify-center rounded-2xl bg-white px-6 py-12 text-center shadow-lg",children:[(0,s.jsx)("div",{className:"mb-4 inline-flex h-14 w-14 items-center justify-center rounded-full bg-kpi-blue text-primary shadow-md",children:(0,s.jsx)("span",{className:"text-xl font-semibold",children:"+"})}),(0,s.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Start building your inventory"}),(0,s.jsx)("p",{className:"mt-2 max-w-md text-sm text-gray-600",children:"Add your first products to keep track of stock levels, purchase prices, and suppliers in one clean dashboard."}),(0,s.jsx)("button",{type:"button",onClick:t,className:"mt-5 inline-flex items-center justify-center rounded-2xl bg-primary px-5 py-2.5 text-sm font-semibold text-white shadow-lg hover:bg-[#1558b1] focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",children:"+ Add New Product"})]})}let W=[10,25,50];function z(e,t){if(0===t.length)return;let r=Object.keys(t[0]),s=new Blob([[r.join(","),...t.map(e=>r.map(t=>{let r=e[t],s=null==r?"":String(r);return'"'.concat(s.replace(/"/g,'""'),'"')}).join(","))].join("\n")],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(s),n=document.createElement("a");n.href=a,n.setAttribute("download",e),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)}function q(){let[e,t]=(0,a.useState)(()=>l),[r,i]=(0,a.useState)("all"),[c,d]=(0,a.useState)(""),[u,p]=(0,a.useState)("All"),[m,x]=(0,a.useState)("all"),[g,f]=(0,a.useState)("All"),[b,w]=(0,a.useState)("All"),[j,v]=(0,a.useState)("name-asc"),[N,S]=(0,a.useState)(1),[P,C]=(0,a.useState)(W[0]),[I,A]=(0,a.useState)(new Set),[F,M]=(0,a.useState)(!1),[D,L]=(0,a.useState)("create"),[U,q]=(0,a.useState)(null),[H,V]=(0,a.useState)(null),B=e.length,G=e.filter(e=>e.stock>0&&e.stock<=e.minStock).length,Q=e.filter(e=>0===e.stock).length,_=e.filter(e=>{let t=new Date(e.createdAt);return(Date.now()-t.getTime())/864e5<=30}).length,K=(0,a.useMemo)(()=>e.filter(e=>{if(c.trim()){let t=c.toLowerCase();if(!(e.name.toLowerCase().includes(t)||e.sku.toLowerCase().includes(t)||e.reference.toLowerCase().includes(t)))return!1}return("All"===u||e.category===u)&&("All"===g||e.supplierId===g)&&("All"===b||e.warehouseId===b)&&("low"!==m||e.stock>0&&e.stock<=e.minStock)&&("out"!==m||0===e.stock)&&("in"!==m||!(e.stock<=0))&&("low-stock"!==r||e.stock>0&&e.stock<=e.minStock)&&("out-of-stock"!==r||0===e.stock)&&("inactive"!==r||"inactive"===e.status)}).sort((e,t)=>"name-asc"===j?e.name.localeCompare(t.name):"stock-desc"===j?t.stock-e.stock:"price-desc"===j?t.salePrice-e.salePrice:"newest"===j?new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime():0),[e,c,u,g,b,m,j,r]),X=K.length,Y=Math.min(N,Math.max(1,Math.ceil(X/P))),$=(0,a.useMemo)(()=>{let e=(Y-1)*P;return K.slice(e,e+P)},[K,Y,P]),J=()=>{L("create"),q(null),M(!0)};return(0,s.jsxs)("div",{className:"space-y-6 px-4 py-6 md:px-8 md:py-8",children:[(0,s.jsx)(h,{selectedQuickFilter:r,onQuickFilterChange:i,onAddProduct:J,onExportAll:()=>{z("inventory-all.csv",e.map(e=>({id:e.id,name:e.name,sku:e.sku,reference:e.reference,category:e.category,purchasePrice:e.purchasePrice,salePrice:e.salePrice,stock:e.stock,supplier:e.supplierName,status:e.status})))},onImport:()=>{alert("Mock import — integrate file upload or import wizard here.")}}),(0,s.jsx)(k,{totalProducts:B,lowStockCount:G,outOfStockCount:Q,newProductsCount:_}),(0,s.jsx)(y,{search:c,category:u,stockFilter:m,supplierId:g,warehouseId:b,sort:j,suppliers:o,warehouses:n,onSearchChange:e=>{d(e),S(1)},onCategoryChange:e=>{p(e),S(1)},onStockFilterChange:e=>{x(e),S(1)},onSupplierChange:e=>{f(e),S(1)},onWarehouseChange:e=>{w(e),S(1)},onSortChange:v}),0===e.length?(0,s.jsx)(Z,{onAddProduct:J}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T,{selectedCount:I.size,onDeleteSelected:()=>{confirm("Delete ".concat(I.size," selected product(s)? This cannot be undone."))&&(t(e=>e.filter(e=>!I.has(e.id))),A(new Set))},onExportSelected:()=>{z("inventory-selected.csv",e.filter(e=>I.has(e.id)).map(e=>({id:e.id,name:e.name,sku:e.sku,reference:e.reference,category:e.category,purchasePrice:e.purchasePrice,salePrice:e.salePrice,stock:e.stock,supplier:e.supplierName,status:e.status})))},onChangeCategory:()=>{let e=window.prompt("Enter new category for selected products (Sanitary / Accessories / Pipes / Tools / Others):","Others");e&&t(t=>t.map(t=>I.has(t.id)?{...t,category:e}:t))},onUpdateSupplier:()=>{let e=o[0];t(t=>t.map(t=>I.has(t.id)?{...t,supplierId:e.id,supplierName:e.name}:t))},onSetInactive:()=>{t(e=>e.map(e=>I.has(e.id)?{...e,status:"inactive"}:e))}}),(0,s.jsx)(E,{products:$,selectedIds:I,sort:j,page:Y,pageSize:P,totalCount:X,pageSizeOptions:W,onToggleSelect:e=>{A(t=>{let r=new Set(t);return r.has(e)?r.delete(e):r.add(e),r})},onToggleSelectAll:()=>{A(e=>{let t=$.map(e=>e.id),r=new Set(e);return t.every(e=>r.has(e))?t.forEach(e=>r.delete(e)):t.forEach(e=>r.add(e)),r})},onChangeSort:v,onChangePage:S,onChangePageSize:e=>{C(e),S(1)},onEditProduct:e=>{L("edit"),q(e),M(!0)},onDuplicateProduct:e=>{t(t=>{let r=new Date().toISOString(),s="undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():"prod-".concat(Date.now());return[{...e,id:s,name:"".concat(e.name," (Copy)"),sku:"".concat(e.sku,"-COPY"),reference:"".concat(e.reference,"-COPY"),createdAt:r,updatedAt:r,stockLog:[]},...t]})},onDeleteProduct:e=>{confirm('Delete product "'.concat(e.name,'"? This cannot be undone.'))&&(t(t=>t.filter(t=>t.id!==e.id)),A(t=>{let r=new Set(t);return r.delete(e.id),r}))},onOpenHistory:e=>{V(e)},onExportVisible:()=>{z("inventory-visible.csv",$.map(e=>({id:e.id,name:e.name,sku:e.sku,reference:e.reference,category:e.category,purchasePrice:e.purchasePrice,salePrice:e.salePrice,stock:e.stock,supplier:e.supplierName,status:e.status})))},onPrintVisible:()=>{window.print()}})]}),(0,s.jsx)(O,{open:F,mode:D,product:U,suppliers:o,warehouses:n,onClose:()=>M(!1),onSave:(e,r)=>{t(t=>{if("create"===D){let s="undefined"!=typeof crypto&&"randomUUID"in crypto?crypto.randomUUID():"prod-".concat(Date.now()),a=new Date().toISOString();return[{id:s,name:e.name,sku:e.reference,reference:e.reference,category:e.category,purchasePrice:e.purchasePrice,salePrice:e.salePrice,stock:e.stock+r.reduce((e,t)=>e+t.quantity,0),minStock:e.minStock,supplierId:e.supplierId,supplierName:e.supplierName,warehouseId:e.warehouseId,warehouseName:e.warehouseName,status:e.status,imageUrl:e.imageUrl,createdAt:a,updatedAt:a,stockLog:r.map(e=>({...e,productId:s}))},...t]}return U?t.map(t=>{if(t.id!==U.id)return t;let s=e.stock+r.reduce((e,t)=>e+t.quantity,0);return{...t,name:e.name,reference:e.reference,sku:e.reference,category:e.category,purchasePrice:e.purchasePrice,salePrice:e.salePrice,stock:s,minStock:e.minStock,supplierId:e.supplierId,supplierName:e.supplierName,warehouseId:e.warehouseId,warehouseName:e.warehouseName,status:e.status,imageUrl:e.imageUrl,updatedAt:new Date().toISOString(),stockLog:[...t.stockLog,...r.map(e=>({...e,productId:t.id}))]}}):t}),M(!1)}}),H&&(0,s.jsx)(R,{productName:H.name,entries:H.stockLog,onClose:()=>V(null)})]})}},78030:function(e,t,r){r.d(t,{Z:function(){return l}});var s=r(2265);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ")};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:c="",children:d,iconNode:u,...p}=e;return(0,s.createElement)("svg",{ref:t,...o,width:a,height:a,stroke:r,strokeWidth:l?24*Number(i)/Number(a):i,className:n("lucide",c),...p},[...u.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),l=(e,t)=>{let r=(0,s.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,s.createElement)(i,{ref:o,iconNode:t,className:n("lucide-".concat(a(e)),l),...c})});return r.displayName="".concat(e),r}},1705:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(78030).Z)("Boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]])},70518:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(78030).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},404:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(78030).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},10883:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(78030).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},74697:function(e,t,r){r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(78030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}}]);