(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13],{15500:function(e,t,s){Promise.resolve().then(s.bind(s,99378))},99378:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var a=s(57437),l=s(2265),n=s(89669),r=s(57883),i=s(42844);let d=[{id:"PAY-1",orderId:"CMD-1001",date:new Date().toISOString(),amount:500,method:"cash",reference:"CASH-001",cashier:"Cashier 1",status:"paid"}],c=new Set;function x(){for(let e of c)e(d)}var o=s(85144),m=s(78030);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,m.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),h=(0,m.Z)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),p=(0,m.Z)("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]),f=(0,m.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var j=s(404),b=s(10883),g=s(74697);function y(){var e;let[t,s]=(0,l.useState)([]),[m,y]=(0,l.useState)([]),[N,v]=(0,l.useState)(""),[w,k]=(0,l.useState)("all"),[C,D]=(0,l.useState)("all"),[M,S]=(0,l.useState)(null),[Z,A]=(0,l.useState)(!1),[P,q]=(0,l.useState)(()=>({amount:0,method:"cash",reference:"",bankName:"",dueDate:"",cashier:"Cashier 1",status:"paid",date:new Date().toISOString(),note:""})),[F,O]=(0,l.useState)({}),[R,I]=(0,l.useState)(null);function T(e){let t=m.filter(t=>t.orderId===e.id),s=t.filter(e=>"paid"===e.status).reduce((e,t)=>e+t.amount,0),a=Math.max(0,e.totalAmount-s),l=t.some(e=>"pending"===e.status),n=t.some(e=>"rejected"===e.status),r=e.items.reduce((e,t)=>e+t.unitPrice*t.quantity,0),i=Math.max(0,e.totalAmount-r);return{paid:s,remaining:a,status:0===a?"confirmed":s>0?"partially paid":l||n?"pending":"new",subtotal:r,taxes:i,hasRejected:n}}(0,l.useEffect)(()=>{let e=(0,i.FH)(s),t=(c.add(y),y(d),()=>{c.delete(y)});return()=>{e(),t()}},[]),(0,l.useEffect)(()=>{if(!R)return;let e=setTimeout(()=>{I(null)},3e3);return()=>clearTimeout(e)},[R]);let L=(0,l.useMemo)(()=>{let e=new Date,s=e.toISOString().slice(0,10);return t.filter(t=>{let{status:a}=T(t);if("all"!==C&&a!==C)return!1;if("all"!==w){let a=new Date(t.date),l=Math.floor((e.getTime()-new Date(a.getFullYear(),a.getMonth(),a.getDate()).getTime())/864e5);if("day"===w&&t.date!==s||"week"===w&&l>7||"month"===w&&!(a.getFullYear()===e.getFullYear()&&a.getMonth()===e.getMonth()))return!1}let l=N.trim().toLowerCase();return!l||t.id.toLowerCase().includes(l)||t.clientName.toLowerCase().includes(l)||t.clientPhone.toLowerCase().includes(l)})},[t,N,m,w,C]),H=(0,l.useMemo)(()=>{var e;return null!==(e=M?t.find(e=>e.id===M):L[0])&&void 0!==e?e:null},[t,L,M]),E=H?T(H):null,_=H?m.filter(e=>e.orderId===H.id):[],B=null!==(e=null==E?void 0:E.remaining)&&void 0!==e?e:0,V=(0,l.useMemo)(()=>{let e=new Date().toISOString().slice(0,10),s=0,a=0,l=0;for(let e of t){let{remaining:t,status:n}=T(e);t>0&&(s+=t,"new"===n&&(a+=1),"pending"===n&&(a+=1),"partially paid"===n&&(l+=1))}let n=0,r=0;for(let t of m)"paid"===t.status&&t.date.slice(0,10)===e&&(n+=t.amount,r+=1);return{totalPending:s,pendingCount:a,partialCount:l,todayPaymentsAmount:n,todayPaymentsCount:r}},[t,m]),z=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],H&&E&&(q({amount:E.remaining,method:"cash",reference:"",bankName:"",dueDate:"",cashier:"Cashier 1",status:"paid",date:new Date().toISOString(),note:""}),O({}),A(!0))},Y=e=>{confirm("Void this payment? This action cannot be undone.")&&(d=d.filter(t=>t.id!==e),x(),I({type:"success",message:"Payment voided."}))},W=(e,t)=>{d=d.map(s=>s.id===e?{...s,status:t}:s),x(),I({type:"success",message:"Payment status updated."})},J=e=>{alert("Receipt for payment ".concat(e.id," would be printed here."))};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(n.Header,{role:"manager",name:"Cashier"}),R&&(0,a.jsx)("div",{className:"rounded-xl border px-3 py-2 text-xs ".concat("success"===R.type?"border-emerald-200 bg-emerald-50 text-emerald-700":"border-red-200 bg-red-50 text-red-700"),children:R.message}),(0,a.jsxs)("section",{className:"grid grid-cols-1 gap-3 md:grid-cols-4",children:[(0,a.jsxs)(r.Z,{className:"flex items-center justify-between rounded-2xl bg-gradient-to-br from-slate-900 to-slate-800 p-4 text-slate-50 shadow-md",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-300",children:"Total pending"}),(0,a.jsxs)("p",{className:"mt-1 text-xl font-semibold",children:["MAD ",V.totalPending.toFixed(2)]}),(0,a.jsxs)("p",{className:"mt-1 text-[11px] text-slate-300",children:[V.pendingCount+V.partialCount," open orders"]})]}),(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-slate-700 text-amber-300",children:(0,a.jsx)(o.Z,{className:"h-5 w-5"})})]}),(0,a.jsxs)(r.Z,{className:"flex items-center justify-between rounded-2xl bg-gradient-to-br from-emerald-50 to-emerald-100 p-4 shadow-md",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-emerald-700/80",children:"Today payments"}),(0,a.jsxs)("p",{className:"mt-1 text-xl font-semibold text-emerald-900",children:["MAD ",V.todayPaymentsAmount.toFixed(2)]}),(0,a.jsxs)("p",{className:"mt-1 text-[11px] text-emerald-700/80",children:[V.todayPaymentsCount," transaction",1===V.todayPaymentsCount?"":"s"]})]}),(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-white/80 text-emerald-600",children:(0,a.jsx)(u,{className:"h-5 w-5"})})]}),(0,a.jsxs)(r.Z,{className:"flex items-center justify-between rounded-2xl bg-gradient-to-br from-amber-50 to-amber-100 p-4 shadow-md",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-amber-800/80",children:"Partially paid"}),(0,a.jsx)("p",{className:"mt-1 text-xl font-semibold text-amber-900",children:V.partialCount}),(0,a.jsx)("p",{className:"mt-1 text-[11px] text-amber-800/80",children:"Orders with remaining balance"})]}),(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-white/80 text-amber-600",children:(0,a.jsx)(h,{className:"h-5 w-5"})})]}),(0,a.jsxs)(r.Z,{className:"flex items-center justify-between rounded-2xl bg-gradient-to-br from-slate-50 to-slate-100 p-4 shadow-md",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-500",children:"Fully paid (not listed)"}),(0,a.jsx)("p",{className:"mt-1 text-xl font-semibold text-slate-900",children:t.filter(e=>0===T(e).remaining).length}),(0,a.jsx)("p",{className:"mt-1 text-[11px] text-slate-500",children:"Completed orders today & earlier"})]}),(0,a.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-white/80 text-slate-500",children:(0,a.jsx)(p,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-[minmax(0,1.4fr)_minmax(0,2fr)]",children:[(0,a.jsxs)(r.Z,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-900",children:"Pending payments"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Select an order to process payments."})]}),(0,a.jsx)(o.Z,{className:"h-5 w-5 text-slate-400"})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[180px]",children:[(0,a.jsx)(f,{className:"pointer-events-none absolute left-3 top-1/2 h-3.5 w-3.5 -translate-y-1/2 text-slate-400"}),(0,a.jsx)("input",{type:"search",value:N,onChange:e=>v(e.target.value),placeholder:"Search by order ID, client name, or phone...",className:"w-full rounded-2xl border border-slate-200 bg-slate-50 py-1.5 pl-8 pr-3 text-xs outline-none focus:ring-2 focus:ring-slate-900/10"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-[11px] text-slate-600",children:[(0,a.jsx)(j.Z,{className:"h-3 w-3 text-slate-400"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:"Date"}),(0,a.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"rounded-xl border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-700 outline-none focus:ring-2 focus:ring-slate-900/10",children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"day",children:"Last day"}),(0,a.jsx)("option",{value:"week",children:"Last week"}),(0,a.jsx)("option",{value:"month",children:"Last month"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:"Status"}),(0,a.jsxs)("select",{value:C,onChange:e=>D(e.target.value),className:"rounded-xl border border-slate-200 bg-white px-2 py-1 text-[11px] text-slate-700 outline-none focus:ring-2 focus:ring-slate-900/10",children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"new",children:"New"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"partially paid",children:"Partially paid"}),(0,a.jsx)("option",{value:"confirmed",children:"Confirmed"})]})]})]})]}),(0,a.jsx)("div",{className:"max-h-[60vh] overflow-y-auto rounded-2xl border border-slate-100 bg-white",children:(0,a.jsxs)("table",{className:"min-w-full text-[11px]",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Date"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Order"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Customer"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Total"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Paid"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Remaining"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===L.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-3 py-4 text-center text-xs text-slate-400",children:"No pending payments."})}):L.map(e=>{let{paid:t,remaining:s,status:l,hasRejected:n}=T(e),r=(null==H?void 0:H.id)===e.id;return(0,a.jsxs)("tr",{className:"cursor-pointer border-l-2 ".concat(r?"border-slate-900 bg-slate-900/5":"border-transparent hover:border-slate-300 hover:bg-slate-50/80"),onClick:()=>S(e.id),children:[(0,a.jsx)("td",{className:"px-3 py-2 text-slate-500",children:e.date}),(0,a.jsx)("td",{className:"px-3 py-2 font-medium text-slate-800",children:e.id}),(0,a.jsx)("td",{className:"px-3 py-2 text-slate-600",children:e.clientName}),(0,a.jsx)("td",{className:"px-3 py-2 text-right text-slate-700",children:e.totalAmount.toFixed(2)}),(0,a.jsx)("td",{className:"px-3 py-2 text-right text-slate-600",children:t.toFixed(2)}),(0,a.jsx)("td",{className:"px-3 py-2 text-right font-semibold ".concat(s>0?"text-amber-700":"text-slate-500"),children:s.toFixed(2)}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full px-2.5 py-0.5 text-[10px] font-semibold ".concat("confirmed"===l?"bg-emerald-50 text-emerald-700":"pending"===l||"partially paid"===l?"bg-amber-50 text-amber-700":"bg-blue-50 text-blue-700"),children:[n&&(0,a.jsx)("span",{className:"inline-block h-1.5 w-1.5 rounded-full bg-red-500"}),l]})})]},e.id)})})]})})]})]}),(0,a.jsx)("div",{className:"space-y-4",children:H&&E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(r.Z,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-[11px] uppercase tracking-wide text-slate-400",children:"Order"}),(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-900",children:H.id})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full px-3 py-1 text-[11px] font-semibold ".concat("confirmed"===E.status?"bg-emerald-50 text-emerald-700":"partially paid"===E.status||"pending"===E.status?"bg-amber-50 text-amber-700":"bg-blue-50 text-blue-700"),children:[(0,a.jsx)(u,{className:"h-3 w-3"}),E.status]}),(0,a.jsx)("span",{className:"text-[11px] text-slate-400",children:H.date})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 text-xs text-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Customer"}),(0,a.jsx)("span",{className:"font-medium text-slate-800",children:H.clientName})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Phone"}),(0,a.jsx)("span",{children:H.clientPhone})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-4 xl:grid-cols-[minmax(0,1.6fr)_minmax(0,1.2fr)]",children:[(0,a.jsxs)(r.Z,{className:"space-y-3",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold text-slate-900",children:"Order items"}),(0,a.jsx)("div",{className:"max-h-56 overflow-y-auto rounded-2xl border border-slate-100 bg-white",children:(0,a.jsxs)("table",{className:"min-w-full text-[11px]",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Product"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right",children:"Qty"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right",children:"Unit"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right",children:"Subtotal"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:H.items.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsxs)("td",{className:"px-3 py-2 text-slate-700",children:[(0,a.jsx)("div",{className:"text-xs font-medium",children:e.name}),(0,a.jsxs)("div",{className:"text-[10px] text-slate-400",children:["Ref. ",e.reference]})]}),(0,a.jsx)("td",{className:"px-3 py-2 text-right text-slate-600",children:e.quantity}),(0,a.jsxs)("td",{className:"px-3 py-2 text-right text-slate-600",children:["MAD ",e.unitPrice.toFixed(2)]}),(0,a.jsxs)("td",{className:"px-3 py-2 text-right font-semibold text-slate-800",children:["MAD"," ",(e.unitPrice*e.quantity).toFixed(2)]})]},e.productId))})]})}),(0,a.jsxs)("p",{className:"mt-1 flex items-center gap-1 text-[11px] text-slate-400",children:[(0,a.jsx)(h,{className:"h-3 w-3"}),"Product quantities and prices are read-only here."]})]}),(0,a.jsxs)(r.Z,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold text-slate-900",children:"Payment summary"}),(0,a.jsx)(p,{className:"h-4 w-4 text-slate-400"})]}),(0,a.jsxs)("div",{className:"space-y-1 text-xs text-slate-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Subtotal"}),(0,a.jsxs)("span",{children:[E.subtotal.toFixed(2)," MAD"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"Discounts"}),(0,a.jsx)("span",{children:"–"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{children:"T.V.A"}),(0,a.jsxs)("span",{children:[E.taxes.toFixed(2)," MAD"]})]}),(0,a.jsxs)("div",{className:"mt-1 flex items-center justify-between border-t border-slate-200 pt-2 text-[13px] font-semibold text-slate-900",children:[(0,a.jsx)("span",{children:"Total"}),(0,a.jsxs)("span",{children:[H.totalAmount.toFixed(2)," MAD"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-600",children:[(0,a.jsx)("span",{children:"Paid"}),(0,a.jsxs)("span",{children:[E.paid.toFixed(2)," MAD"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs font-semibold text-amber-700",children:[(0,a.jsx)("span",{children:"Remaining"}),(0,a.jsxs)("span",{children:[E.remaining.toFixed(2)," MAD"]})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,a.jsxs)("button",{type:"button",disabled:B<=0,onClick:()=>z(!1),className:"inline-flex items-center gap-1 rounded-full bg-slate-900 px-4 py-2 text-[11px] font-semibold text-white shadow-soft disabled:cursor-not-allowed disabled:opacity-40",children:[(0,a.jsx)(u,{className:"h-3 w-3"}),"Record payment"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{H&&alert("Invoice for ".concat(H.id," would be generated here."))},className:"ml-auto inline-flex items-center gap-1 rounded-full border border-slate-200 bg-white px-4 py-2 text-[11px] font-medium text-slate-700",children:[(0,a.jsx)(p,{className:"h-3 w-3"}),"Invoice / Proforma"]})]})]})]}),(0,a.jsxs)(r.Z,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h3",{className:"text-xs font-semibold text-slate-900",children:"Payment history"}),(0,a.jsxs)("span",{className:"text-[11px] text-slate-400",children:[_.length," payment",1===_.length?"":"s"]})]}),(0,a.jsx)("div",{className:"max-h-52 overflow-y-auto rounded-2xl border border-slate-100 bg-white",children:(0,a.jsxs)("table",{className:"min-w-full text-[11px]",children:[(0,a.jsx)("thead",{className:"bg-slate-50 text-slate-500",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Date"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Method"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Reference"}),(0,a.jsx)("th",{className:"px-3 py-2 text-left",children:"Status"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right",children:"Amount"}),(0,a.jsx)("th",{className:"px-3 py-2 text-right",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-slate-100",children:0===_.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-3 py-4 text-center text-xs text-slate-400",children:"No payments recorded yet."})}):_.map(e=>{var t;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-3 py-2 text-slate-600",children:new Date(e.date).toLocaleDateString("fr-FR")}),(0,a.jsx)("td",{className:"px-3 py-2 text-slate-600",children:e.method}),(0,a.jsx)("td",{className:"px-3 py-2 text-slate-500",children:null!==(t=e.reference)&&void 0!==t?t:"–"}),(0,a.jsx)("td",{className:"px-3 py-2",children:(0,a.jsxs)("select",{value:e.status,onChange:t=>W(e.id,t.target.value),className:"rounded-full border px-2 py-0.5 text-[10px] font-semibold outline-none ".concat("paid"===e.status?"border-emerald-200 bg-emerald-50 text-emerald-700":"pending"===e.status?"border-amber-200 bg-amber-50 text-amber-700":"border-red-200 bg-red-50 text-red-700"),children:[(0,a.jsx)("option",{value:"paid",children:"paid"}),(0,a.jsx)("option",{value:"pending",children:"pending"}),(0,a.jsx)("option",{value:"rejected",children:"rejected"})]})}),(0,a.jsxs)("td",{className:"px-3 py-2 text-right font-semibold text-slate-900",children:["MAD ",e.amount.toFixed(2)]}),(0,a.jsx)("td",{className:"px-3 py-2 text-right",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-1",children:[(0,a.jsx)("button",{type:"button",onClick:()=>J(e),className:"rounded-full bg-slate-100 px-2 py-1 text-[10px] text-slate-600 hover:bg-slate-200",children:"Receipt"}),(0,a.jsx)("button",{type:"button",onClick:()=>Y(e.id),className:"rounded-full bg-red-50 px-2 py-1 text-[10px] text-red-600 hover:bg-red-100",children:(0,a.jsx)(b.Z,{className:"h-3 w-3"})})]})})]},e.id)})})]})})]})]}):(0,a.jsx)(r.Z,{className:"flex items-center justify-center py-16 text-xs text-slate-400",children:"Select an order on the left to view details and process payments."})})]}),Z&&H&&E&&(0,a.jsx)("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:(0,a.jsxs)("div",{className:"w-full max-w-md rounded-2xl bg-white p-5 shadow-2xl",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-slate-900",children:"Record payment"}),(0,a.jsxs)("p",{className:"text-[11px] text-slate-500",children:["Remaining balance:"," ",(0,a.jsxs)("span",{className:"font-semibold text-amber-700",children:["MAD ",E.remaining.toFixed(2)]})]})]}),(0,a.jsx)("button",{type:"button",onClick:()=>A(!1),className:"inline-flex h-7 w-7 items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:bg-slate-200",children:(0,a.jsx)(g.Z,{className:"h-3 w-3"})})]}),(0,a.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"pay-amount",className:"block text-[11px] font-medium text-slate-600",children:"Amount"}),(0,a.jsxs)("div",{className:"mt-1 inline-flex items-center gap-1 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2",children:[(0,a.jsx)("span",{className:"text-[10px] text-slate-400",children:"MAD"}),(0,a.jsx)("input",{id:"pay-amount",type:"text",inputMode:"decimal",value:P.amount,onChange:e=>q(t=>({...t,amount:Number(e.target.value)||0})),className:"w-24 bg-transparent text-right text-[11px] text-slate-800 outline-none"})]}),F.amount&&(0,a.jsx)("p",{className:"mt-1 text-[11px] text-red-500",children:F.amount})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-slate-600",children:"Method"}),(0,a.jsxs)("select",{value:P.method,onChange:e=>{let t=e.target.value;q(e=>({...e,method:t,status:"credit"===t||"cheque"===t||"promissory-note"===t?"pending":"paid"}))},className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10",children:[(0,a.jsx)("option",{value:"cash",children:"Cash"}),(0,a.jsx)("option",{value:"card",children:"Card"}),(0,a.jsx)("option",{value:"cheque",children:"Cheque"}),(0,a.jsx)("option",{value:"promissory-note",children:"Promissory note"}),(0,a.jsx)("option",{value:"transfer",children:"Bank transfer"}),(0,a.jsx)("option",{value:"mobile",children:"Mobile payment"}),(0,a.jsx)("option",{value:"credit",children:"Credit / Deferred"}),(0,a.jsx)("option",{value:"other",children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-slate-600",children:"Reference"}),(0,a.jsx)("input",{type:"text",value:P.reference,onChange:e=>q(t=>({...t,reference:e.target.value})),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10",placeholder:"cheque"===P.method||"promissory-note"===P.method||"transfer"===P.method||"card"===P.method?"Transaction / cheque ref.":"Optional"})]})]}),("cheque"===P.method||"promissory-note"===P.method||"credit"===P.method)&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-slate-600",children:"credit"===P.method?"Due date":"Deposit / due date"}),(0,a.jsx)("input",{type:"date",value:P.dueDate,onChange:e=>q(t=>({...t,dueDate:e.target.value})),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10"}),F.dueDate&&(0,a.jsx)("p",{className:"mt-1 text-[11px] text-red-500",children:F.dueDate})]}),("cheque"===P.method||"promissory-note"===P.method)&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-slate-600",children:"Bank"}),(0,a.jsx)("input",{type:"text",value:P.bankName,onChange:e=>q(t=>({...t,bankName:e.target.value})),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10",placeholder:"Bank name"}),F.bankName&&(0,a.jsx)("p",{className:"mt-1 text-[11px] text-red-500",children:F.bankName})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-slate-600",children:"Status"}),(0,a.jsxs)("select",{value:P.status,onChange:e=>q(t=>({...t,status:e.target.value})),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10",children:[(0,a.jsx)("option",{value:"paid",children:"Paid"}),(0,a.jsx)("option",{value:"pending",children:"Pending"}),(0,a.jsx)("option",{value:"rejected",children:"Rejected"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-slate-600",children:"Date & time"}),(0,a.jsx)("input",{type:"datetime-local",value:P.date.slice(0,16),onChange:e=>q(t=>({...t,date:new Date(e.target.value).toISOString()})),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-[11px] font-medium text-slate-600",children:"Notes"}),(0,a.jsx)("textarea",{rows:2,value:P.note,onChange:e=>q(t=>({...t,note:e.target.value})),className:"mt-1 w-full rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-xs outline-none focus:ring-2 focus:ring-slate-900/10",placeholder:"Optional internal note"})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:()=>A(!1),className:"rounded-full bg-slate-100 px-4 py-2 text-xs font-medium text-slate-700 hover:bg-slate-200",children:"Cancel"}),(0,a.jsx)("button",{type:"button",onClick:()=>{if(!H||!E)return;let e={},t="credit"===P.method,s="cheque"===P.method||"promissory-note"===P.method;!t&&P.amount<=0&&(e.amount="Amount must be greater than 0."),P.amount>E.remaining+1e-4&&(e.amount="Amount cannot exceed remaining balance."),t&&!P.dueDate&&(e.dueDate="Due date is required for credit payments."),s&&(P.reference||(e.reference="Reference number is required for cheque/promissory."),P.bankName||(e.bankName="Bank name is required for cheque/promissory."),P.dueDate||(e.dueDate="Deposit/due date is required for cheque/promissory.")),O(e),Object.keys(e).length>0||(d=[{id:"PAY-".concat(Date.now()),orderId:H.id,date:P.date,amount:P.amount,method:P.method,reference:P.reference||void 0,bankName:P.bankName||void 0,dueDate:P.dueDate||void 0,cashier:P.cashier,note:P.note||void 0,status:P.status},...d],x(),A(!1),I({type:"success",message:"Payment recorded successfully."}))},className:"rounded-full bg-slate-900 px-5 py-2 text-xs font-semibold text-white shadow-soft hover:bg-black",children:"Confirm payment"})]})]})})]})}},89669:function(e,t,s){"use strict";s.d(t,{Header:function(){return i}});var a=s(57437),l=s(6600),n=s(24258),r=s(92496);function i(e){let{role:t,name:s}=e;return(0,a.jsxs)("header",{className:"mb-6 md:mb-8 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs uppercase tracking-wide text-slate-400",children:"manager"===t?"Manager dashboard":"Seller workspace"}),(0,a.jsxs)("h1",{className:"mt-1 text-2xl md:text-3xl font-semibold text-slate-900",children:["Welcome, ",s,(0,a.jsx)("span",{className:"ml-1"})]}),(0,a.jsx)("p",{className:"mt-1 text-sm text-slate-500",children:"Here's what's happening in your store today."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:["seller"===t&&(0,a.jsx)("button",{className:"rounded-full bg-slate-100 px-4 py-2 text-xs font-medium text-slate-600 hover:bg-slate-200",children:"Logout"}),(0,a.jsx)("button",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 hover:bg-slate-200 transition shadow-soft/20",children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"h-10 w-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500 hover:bg-slate-200 transition shadow-soft/20",children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-2 rounded-full bg-white px-3 py-1.5 shadow-soft",children:[(0,a.jsx)(r.Z,{className:"h-6 w-6 text-slate-500"}),(0,a.jsxs)("div",{className:"text-xs",children:[(0,a.jsx)("p",{className:"font-medium text-slate-800",children:s}),(0,a.jsx)("p",{className:"text-slate-400",children:"manager"===t?"Manager":"Seller"})]})]})]})]})}},57883:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(57437);function l(e){let{children:t,className:s=""}=e;return(0,a.jsx)("section",{className:"glass-card p-5 md:p-6 bg-card/90 backdrop-blur-sm ".concat(s),children:t})}},42844:function(e,t,s){"use strict";s.d(t,{FH:function(){return n},MT:function(){return i},NX:function(){return r}});let a=[{id:"CMD-1001",clientName:"John Doe",clientPhone:"+212 600-000000",sellerName:"Seller A",date:"2024-06-21",status:"pending",totalAmount:1475,items:[]},{id:"CMD-1002",clientName:"Jane Smith",clientPhone:"+212 611-123456",sellerName:"Seller B",date:"2024-06-21",status:"cancelled",totalAmount:875,items:[]}],l=new Set;function n(e){return l.add(e),e(a),()=>{l.delete(e)}}function r(e){let t=a.findIndex(t=>t.id===e.id);t>=0?a[t]=e:a=[e,...a],function(){for(let e of l)e(a)}()}function i(e){var t;return null!==(t=a.find(t=>t.id===e))&&void 0!==t?t:null}},78030:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(2265);/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:c="",children:x,iconNode:o,...m}=e;return(0,a.createElement)("svg",{ref:t,...r,width:l,height:l,stroke:s,strokeWidth:d?24*Number(i)/Number(l):i,className:n("lucide",c),...m},[...o.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(x)?x:[x]])}),d=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:d,...c}=s;return(0,a.createElement)(i,{ref:r,iconNode:t,className:n("lucide-".concat(l(e)),d),...c})});return s.displayName="".concat(e),s}},6600:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(78030).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},92496:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(78030).Z)("CircleUserRound",[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},404:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(78030).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},24258:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(78030).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},10883:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(78030).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},85144:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(78030).Z)("WalletCards",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2",key:"4125el"}],["path",{d:"M3 11h3c.8 0 1.6.3 2.1.9l1.1.9c1.6 1.6 4.1 1.6 5.7 0l1.1-.9c.5-.5 1.3-.9 2.1-.9H21",key:"1dpki6"}]])},74697:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.452.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(78030).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[971,23,744],function(){return e(e.s=15500)}),_N_E=e.O()}]);